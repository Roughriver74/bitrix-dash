# Инструкция по настройке

## Первоначальная настройка

После запуска приложения вы будете автоматически перенаправлены на страницу настройки `/setup`.

### Шаг 1: Создание вебхука в Битрикс24

1. Войдите в ваш Битрикс24
2. Перейдите в раздел **"Разработчикам"** → **"Другое"** → **"Входящий вебхук"**
3. Нажмите **"Добавить вебхук"**
4. Выберите следующие права доступа:
   - `tasks` - Задачи (чтение)
   - `user` - Пользователи (чтение)
   - `department` - Структура компании (чтение)
   - `calendar` - Календарь (чтение)
5. Сохраните вебхук и скопируйте URL

### Шаг 2: Настройка дашборда

1. Откройте страницу настройки `/setup`
2. Вставьте скопированный URL вебхука
   - Формат: `https://ваш-домен.bitrix24.ru/rest/123/abc123def456/`
   - **Важно**: URL должен заканчиваться на `/`
3. Введите точное название отдела
   - Например: `IT отдел`, `Отдел разработки`, `Техподдержка`
   - Название должно точно совпадать с названием в Битрикс24
4. Нажмите **"Сохранить и продолжить"**

### Шаг 3: Проверка

После успешной настройки вы будете автоматически перенаправлены на дашборд.

## Изменение настроек

Чтобы изменить настройки:
1. Удалите файл `config.json` в корне проекта
2. Перезагрузите страницу - вы будете перенаправлены на `/setup`

## Решение проблем

### "Не удалось подключиться к Битрикс24"
- Проверьте правильность webhook URL
- Убедитесь, что URL доступен из вашей сети
- Проверьте права доступа вебхука

### "Департамент не найден"
- Проверьте точное название отдела в Битрикс24
- Учитывайте регистр букв
- Убедитесь, что у вебхука есть доступ к структуре компании

## Безопасность

- Файл `config.json` исключен из git
- Не храните webhook URL в публичных репозиториях
- Используйте HTTPS для production окружения